using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class Invulnerability : MonoBehaviour
{
    public float invincibilityTime;

    public GameObject shipCollider;

    PlayerInput input;

    UltCharge ultCharge;

    int defaultLayer;

    int shootableLayer;

    // Use this for initialization
    void Awake()
    {
        ultCharge = GetComponent<UltCharge>();
        input = GetComponent<PlayerInput>();
        defaultLayer = LayerMask.NameToLayer("Default");
        shootableLayer = LayerMask.NameToLayer("Shootable");
    }

    // Update is called once per frame
    void Update()
    {
        if (ultCharge.ultCharged)
        {
            if (input.powerUp)
            {
                StartCoroutine(Invincible());
            }
        }
    }

    IEnumerator Invincible()
    {
        shipCollider.layer = defaultLayer;
        yield return new WaitForSeconds(invincibilityTime);
        shipCollider.layer = shootableLayer;
    }
}
